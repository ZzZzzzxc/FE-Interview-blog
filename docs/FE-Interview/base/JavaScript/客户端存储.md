# 客户端存储

## Local Storage、Session Storage 和 Cookie

| 分类           | 生命周期                                                                   | 存储量                    | 位置                                                       | 设置方式                                                                   |
| -------------- | -------------------------------------------------------------------------- | ------------------------- | ---------------------------------------------------------- | -------------------------------------------------------------------------- |
| cookie         | 默认保存在内存中，随浏览器关闭失效（如果设置过期时间，在到过期时间后失效） | 4 KB                      | 键值对方式存储在客户端（对应同一域名），请求的时候自动携带 | 服务端响应时携带 `Set-Cookie` 请求头，浏览器接收到之后就会在 cookie 中存储 |
| localStorage   | 永久有效                                                                   | 5MB（各个浏览器存在差异） | 键值对方式存储在客户端（对应一个域，受同源策略限制）       | WEB API                                                                    |
| sessionStorage | 当前会话有效，关闭浏览器或网页后失效                                       | 5MB（各个浏览器存在差异） | 键值对方式存储在客户端（对应一个会话，同样受到跨域限制）   | WEB API                                                                    |

## cookie

cookie 是为了解决 HTTP 协议无状态特点导致的问题出现的，通过在发起请求的时候携带以标识请求者的身份，因为存储内容的不同，cookie 存储对于安全性有更高的需求。

cookie 存在的安全问题

- HTTP 明文传输导致被劫持。
- 可以被 JavaScript 脚本读取，容易造成 XSS 攻击。
- 可以被跨域传输，导致 cookie 泄露，造成 CSRF 攻击。

对应的解决方案

- 为 cookie 设置 `secure`，只能使用 HTTPS 传输。
- 为 cookie 设置 `http-only`，禁止 JavaScript 脚本读取 cookie。
- 为 cookie 设置 `same-site`，禁止跨域传输 cookie，减少 CSRF 攻击。

## IndexedDB

## Web SQL
